!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.imageClientSDK=e():t.imageClientSDK=e()}(this,function(){return function(t){var e={};function i(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(a,r,function(e){return t[e]}.bind(null,r));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=10)}([function(t,e,i){"use strict";t.exports={alignTypes:{CENTER:"center",TOP:"top",TOP_LEFT:"top_left",TOP_RIGHT:"top_right",BOTTOM:"bottom",BOTTOM_LEFT:"bottom_left",BOTTOM_RIGHT:"bottom_right",LEFT:"left",RIGHT:"right"},alignTypesMap:{center:"c",top:"t",top_left:"tl",top_right:"tr",bottom:"b",bottom_left:"bl",bottom_right:"br",left:"l",right:"r"},transformTypes:{FIT:"fit",FILL:"fill",FILL_FOCAL:"fill_focal",CROP:"crop",LEGACY_CROP:"legacy_crop",LEGACY_FILL:"legacy_fill"},fittingTypes:{SCALE_TO_FILL:"fill",SCALE_TO_FIT:"fit",STRETCH:"stretch",ORIGINAL_SIZE:"original_size",TILE:"tile",TILE_HORIZONTAL:"tile_horizontal",TILE_VERTICAL:"tile_vertical",FIT_AND_TILE:"fit_and_tile",LEGACY_STRIP_TILE:"legacy_strip_tile",LEGACY_STRIP_TILE_HORIZONTAL:"legacy_strip_tile_horizontal",LEGACY_STRIP_TILE_VERTICAL:"legacy_strip_tile_vertical",LEGACY_STRIP_SCALE_TO_FILL:"legacy_strip_fill",LEGACY_STRIP_SCALE_TO_FIT:"legacy_strip_fit",LEGACY_STRIP_FIT_AND_TILE:"legacy_strip_fit_and_tile",LEGACY_STRIP_ORIGINAL_SIZE:"legacy_strip_original_size",LEGACY_ORIGINAL_SIZE:"actual_size",LEGACY_FIT_WIDTH:"fitWidth",LEGACY_FIT_HEIGHT:"fitHeight",LEGACY_FULL:"full",LEGACY_BG_FIT_AND_TILE:"legacy_tile",LEGACY_BG_FIT_AND_TILE_HORIZONTAL:"legacy_tile_horizontal",LEGACY_BG_FIT_AND_TILE_VERTICAL:"legacy_tile_vertical",LEGACY_BG_NORMAL:"legacy_normal"},htmlTag:{BG:"bg",IMG:"img",SVG:"svg"},upscaleMethods:{DEFAULT:"default",SUPER:"super"},upscaleValues:{default:1,super:2},defaultUSM:{radius:.66,amount:1,threshold:.01},emptyData:{uri:"",css:{img:{},container:{}},attr:{img:{},container:{}}},imageQuality:{HIGH:"HIGH",MEDIUM:"MEDIUM",LOW:"LOW",TINY:"TINY"},imageQualityMap:{HIGH:{size:196e4,quality:90,maxDefaultUpscale:1,maxSuperUpscale:9999},MEDIUM:{size:36e4,quality:85,maxDefaultUpscale:1,maxSuperUpscale:9999},LOW:{size:16e4,quality:80,maxDefaultUpscale:1.2,maxSuperUpscale:9999},TINY:{size:0,quality:80,maxDefaultUpscale:1.4,maxSuperUpscale:9999}},fileType:{JPG:"jpg",JPEG:"jpeg",PNG:"png",WEBP:"webp",WIX_ICO_MP:"wix_ico_mp",WIX_MP:"wix_mp",GIF:"gif",SVG:"svg",UNRECOGNIZED:"unrecognized"},webp:{LOSSLESS:"lossless",LOSSY:"lossy",ALPHA:"alpha",ANIMATION:"animation"},API_VERSION:"v1"}},function(t,e,i){"use strict";var a=i(2),r=i(0),n=i(8);function s(t){var e=new window.Image;e.onload=function(){var i=n.getFeature("isWEBP");i[t]=e.width>0&&e.height>0,n.setFeature("isWEBP",i)},e.src="data:image/webp;base64,"+{lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"}[t]}function o(t){var e=[r.fileType.PNG,r.fileType.JPEG,r.fileType.JPG,r.fileType.WIX_ICO_MP,r.fileType.WIX_MP];return a.includes(e,h(t))}function l(t){return a.includes(["jpg","jpeg"],h(t))}function c(t){return a.includes(["png"],h(t))}function p(t){return a.includes(["webp"],h(t))}function u(t){return/(^https?)|(^data)|(^\/\/)/.test(t)}function h(t){return(/[.]([^.]+)$/.exec(t)&&/[.]([^.]+)$/.exec(t)[1]||"").toLowerCase()}function f(t,e,i,a){return Math.min(i/t,a/e)}function g(t,e,i,a){return Math.max(i/t,a/e)}function T(t,e,i,a,n){return n===r.transformTypes.FILL?g(t,e,i,a):n===r.transformTypes.FIT?f(t,e,i,a):1}function d(t){return t.pixelAspectRatio||1}function A(t,e,i){var a=r.imageQualityMap[_(t,e)];return i===r.upscaleMethods.SUPER?a.maxSuperUpscale:a.maxDefaultUpscale}function _(t,e){var i=t*e;return i>r.imageQualityMap[r.imageQuality.HIGH].size?r.imageQuality.HIGH:i>r.imageQualityMap[r.imageQuality.MEDIUM].size?r.imageQuality.MEDIUM:i>r.imageQualityMap[r.imageQuality.LOW].size?r.imageQuality.LOW:r.imageQuality.TINY}function m(t,e){var i=Math.pow(10,e||0);return(t*i/i).toFixed(parseInt(e,10))}t.exports={populateGlobalFeatureSupport:function(){"undefined"!=typeof window&&(s(r.webp.LOSSY),s(r.webp.ANIMATION),n.setFeature("isObjectFitBrowser","objectFit"in window.document.documentElement.style))},isWEBPBrowserSupport:function(t){var e=n.getFeature("isWEBP"),i=t===r.fileType.JPG&&e[r.webp.LOSSY],a=t===r.fileType.PNG&&e[r.webp.LOSSLESS],s=t===r.fileType.PNG&&e[r.webp.ALPHA];return i||a&&s},isObjectFitBrowserSupport:function(){return n.getFeature("isObjectFitBrowser")},isImageTransformApplicable:function(t){return o(t)&&!u(t)},isValidRequest:function(t,e,i){return i&&e&&!(!(n=e.id)||!n.trim()||"none"===n.toLowerCase())&&a.includes(r.fittingTypes,t);var n},isImageTypeSupported:o,isExternalUrl:u,isJPG:l,isPNG:c,isWEBP:p,getFileType:function(t){return l(t)?r.fileType.JPG:c(t)?r.fileType.PNG:p(t)?r.fileType.WEBP:r.fileType.UNRECOGNIZED},getFileExtension:h,getFileName:function(t){var e=t,i=/\/(.*?)$/.exec(t);return i&&i[1]&&(e=i[1]),e.replace(/\.[^.]*$/,"")},getAlignedRect:function(t,e,i){var a=void 0,n=void 0;switch(i){case r.alignTypes.CENTER:a=Math.max(0,(t.width-e.width)/2),n=Math.max(0,(t.height-e.height)/2);break;case r.alignTypes.TOP:a=Math.max(0,(t.width-e.width)/2),n=0;break;case r.alignTypes.TOP_LEFT:a=0,n=0;break;case r.alignTypes.TOP_RIGHT:a=Math.max(0,t.width-e.width),n=0;break;case r.alignTypes.BOTTOM:a=Math.max(0,(t.width-e.width)/2),n=Math.max(0,t.height-e.height);break;case r.alignTypes.BOTTOM_LEFT:a=0,n=Math.max(0,t.height-e.height);break;case r.alignTypes.BOTTOM_RIGHT:a=Math.max(0,t.width-e.width),n=Math.max(0,t.height-e.height);break;case r.alignTypes.LEFT:a=0,n=Math.max(0,(t.height-e.height)/2);break;case r.alignTypes.RIGHT:a=Math.max(0,t.width-e.width),n=Math.max(0,(t.height-e.height)/2)}return{x:t.x?t.x+a:a,y:t.y?t.y+n:n,width:Math.min(t.width,e.width),height:Math.min(t.height,e.height)}},getOverlappingRect:function(t,e){var i=Math.max(0,Math.min(t.width,e.x+e.width)-Math.max(0,e.x)),a=Math.max(0,Math.min(t.height,e.y+e.height)-Math.max(0,e.y));return i&&a&&(t.width!==i||t.height!==a)?{x:Math.max(0,e.x),y:Math.max(0,e.y),width:i,height:a}:null},getFitScaleFactor:f,getFillScaleFactor:g,getScaleFactor:T,getCalculatedTransformedData:function(t,e,i,a,n){var s=d(i),o={width:0,height:0,scaleFactor:0,upscaleMethod:r.upscaleValues[n]||r.upscaleValues.default,cssUpscaleNeeded:!1},l=T(t,e,i.width*s,i.height*s,a),c=A(t,e,n);if(l>c){switch(a){case r.transformTypes.FILL:o.width=i.width*s*(c/l),o.height=i.height*s*(c/l);break;case r.transformTypes.FIT:o.width=t*c,o.height=e*c}o.scaleFactor=c,o.cssUpscaleNeeded=!0}else{switch(a){case r.transformTypes.FILL:o.width=i.width*s,o.height=i.height*s;break;case r.transformTypes.FIT:o.width=t*l,o.height=e*l}o.scaleFactor=l,o.cssUpscaleNeeded=!1}return o},getPixelAspectRatio:d,getAlignment:function(t){return r.alignTypesMap[t.alignment]||r.alignTypesMap[r.alignTypes.CENTER]},getPreferredImageQuality:function(t,e){return r.imageQualityMap[_(t,e)].quality},getPreferredUpscaleFactor:A,getDimension:function(t,e,i,a,r){var n=T(t,e,i,a,r);return{width:Math.round(t*n),height:Math.round(e*n)}},getFocalPoint:function(t){var e=null;return"number"==typeof t.x&&"number"==typeof t.y&&(e={x:m(Math.max(0,Math.min(100,t.x))/100,2),y:m(Math.max(0,Math.min(100,t.y))/100,2)}),e},getUpscaleString:function(t){return t&&t.upscaleMethod&&"string"==typeof t.upscaleMethod?t.upscaleMethod.toLowerCase():r.upscaleMethods.DEFAULT},roundToFixed:m}},function(t,e,i){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports={assign:function(){for(var t=arguments[0]||{},e=Array.prototype.slice.call(arguments,1,arguments.length),i=0;i<e.length;i++){var a=e[i];for(var r in a)a.hasOwnProperty(r)&&(t[r]=a[r])}return t},includes:function(t,e){return t.indexOf?t.indexOf(e)>-1:!(!t||"object"!==(void 0===t?"undefined":a(t)))&&Object.keys(t).some(function(i){return t[i]===e})},last:function(t){return t[t.length-1]},template:function(t){return function(e){var i=t;for(var a in e)e.hasOwnProperty(a)&&(i=i.replace(new RegExp("\\$\\{"+a+"\\}","g"),e[a]));return i}}}},function(t,e,i){"use strict";var a=i(1),r=i(7),n=i(6);t.exports=function(t,e,i,s){var o=a.getFileType(e.id),l={fileName:a.getFileName(e.id),fileExtension:a.getFileExtension(e.id),fileType:o,isWEBPSupport:a.isWEBPBrowserSupport(o),fittingType:t,src:{id:e.id,width:e.width,height:e.height,isCropped:!1},focalPoint:{x:e.focalPoint&&e.focalPoint.x,y:e.focalPoint&&e.focalPoint.y},quality:0,upscaleMethod:a.getUpscaleString(s),progressive:!0,unsharpMask:{},watermark:"",parts:[]};return a.isImageTransformApplicable(e.id)&&(r.setTransformParts(l,e,i),n.setTransformOptions(l,s)),l}},function(t,e,i){"use strict";var a=i(2),r=i(0),n=a.template("fit/w_${width},h_${height}"),s=a.template("fill/w_${width},h_${height},al_${alignment}"),o=a.template("fill/w_${width},h_${height},fp_${focalPointX}_${focalPointY}"),l=a.template("crop/x_${x},y_${y},w_${width},h_${height}"),c=a.template("crop/w_${width},h_${height},al_${alignment}"),p=a.template("fill/w_${width},h_${height},al_${alignment}"),u=a.template(",lg_${upscaleMethod}"),h=a.template(",q_${quality}"),f=a.template(",usm_${radius}_${amount}_${threshold}"),g=a.template(",bl"),T=a.template(",wm_${watermark}");t.exports={getImageURI:function(t){var e=[];t.parts.forEach(function(t){switch(t.transformType){case r.transformTypes.CROP:e.push(l(t));break;case r.transformTypes.LEGACY_CROP:e.push(c(t));break;case r.transformTypes.LEGACY_FILL:var i=p(t);t.upscale&&(i+=u(t)),e.push(i);break;case r.transformTypes.FIT:var a=n(t);t.upscale&&(a+=u(t)),e.push(a);break;case r.transformTypes.FILL:var h=s(t);t.upscale&&(h+=u(t)),e.push(h);break;case r.transformTypes.FILL_FOCAL:var f=o(t);t.upscale&&(f+=u(t)),e.push(f)}});var i=e.join("/");return(t.fileType===r.fileType.PNG&&t.isWEBPSupport||t.fileType===r.fileType.JPG)&&(i+=h(t)),t.unsharpMask&&(i+=f(t.unsharpMask)),t.progressive||(i+=g(t)),t.watermark&&(i+=T(t)),t.src.id+"/"+r.API_VERSION+"/"+i+"/"+t.fileName+"."+(t.isWEBPSupport?"webp":t.fileExtension)}}},function(t,e,i){"use strict";var a=i(0),r=i(1),n=i(4),s=i(3);t.exports=function(t,e,i,o,l){var c=a.emptyData.uri;return r.isImageTransformApplicable(e.id)?(l=l||s(t,e,i,o,l),c=n.getImageURI(l)):c=e.id,c}},function(t,e,i){"use strict";var a=i(2),r=i(0),n=i(1);t.exports={setTransformOptions:function(t,e){e=e||{},t.quality=function(t,e){var i=a.last(t.parts),r=n.getPreferredImageQuality(i.width,i.height),s=e.quality&&e.quality>=5&&e.quality<=90?e.quality:r;return parseInt(s,10)}(t,e),t.unsharpMask=function(t,e){var i=void 0;return!function(t){var e=void 0!==(t=t||{}).radius&&t.radius>=.1&&t.radius<=500,i=void 0!==t.amount&&t.amount>=0&&t.amount<=10,a=void 0!==t.threshold&&t.threshold>=0&&t.threshold<=255;return e&&i&&a}(e.unsharpMask)?function(t){return void 0!==(t=t||{}).radius&&0===t.radius&&void 0!==t.amount&&0===t.amount&&void 0!==t.threshold&&0===t.threshold}(e.unsharpMask)||function(t){var e=a.last(t.parts);return!(e.scaleFactor>=1)||e.forceUSM}(t)&&(i=r.defaultUSM):i={radius:e.unsharpMask.radius,amount:e.unsharpMask.amount,threshold:e.unsharpMask.threshold},i&&(i.radius=n.roundToFixed(i.radius,2),i.amount=n.roundToFixed(i.amount,2),i.threshold=n.roundToFixed(i.threshold,2)),i}(t,e),t.progressive=function(t){return!1!==t.progressive}(e),t.watermark=function(t){return t.watermark}(e)}}},function(t,e,i){"use strict";var a=i(2),r=i(0),n=i(1);function s(t,e){var i=n.getCalculatedTransformedData(t.src.width,t.src.height,e,r.transformTypes.FIT,t.upscaleMethod);return{transformType:r.transformTypes.FILL,width:Math.round(i.width),height:Math.round(i.height),alignment:r.alignTypesMap.center,upscale:i.scaleFactor>1,forceUSM:!1,scaleFactor:i.scaleFactor,cssUpscaleNeeded:i.cssUpscaleNeeded,upscaleMethod:i.upscaleMethod}}function o(t){return{transformType:r.transformTypes.CROP,x:Math.round(t.x),y:Math.round(t.y),width:Math.round(t.width),height:Math.round(t.height),upscale:!1,forceUSM:!1,scaleFactor:1,cssUpscaleNeeded:!1}}t.exports={setTransformParts:function(t,e,i){var l=void 0;switch(e.crop&&(l=n.getOverlappingRect(e,e.crop))&&(t.src.width=l.width,t.src.height=l.height,t.src.cropped=!0,t.parts.push(o(l))),t.fittingType){case r.fittingTypes.SCALE_TO_FIT:case r.fittingTypes.LEGACY_FIT_WIDTH:case r.fittingTypes.LEGACY_FIT_HEIGHT:case r.fittingTypes.LEGACY_FULL:case r.fittingTypes.FIT_AND_TILE:case r.fittingTypes.LEGACY_BG_FIT_AND_TILE:case r.fittingTypes.LEGACY_BG_FIT_AND_TILE_HORIZONTAL:case r.fittingTypes.LEGACY_BG_FIT_AND_TILE_VERTICAL:case r.fittingTypes.LEGACY_BG_NORMAL:t.parts.push(s(t,i));break;case r.fittingTypes.SCALE_TO_FILL:t.parts.push(function(t,e){var i=n.getCalculatedTransformedData(t.src.width,t.src.height,e,r.transformTypes.FILL,t.upscaleMethod),a=n.getFocalPoint(t.focalPoint);return{transformType:a?r.transformTypes.FILL_FOCAL:r.transformTypes.FILL,width:Math.round(i.width),height:Math.round(i.height),alignment:n.getAlignment(e),focalPointX:a&&a.x,focalPointY:a&&a.y,upscale:i.scaleFactor>1,forceUSM:!1,scaleFactor:i.scaleFactor,cssUpscaleNeeded:i.cssUpscaleNeeded,upscaleMethod:i.upscaleMethod}}(t,i));break;case r.fittingTypes.STRETCH:t.parts.push(function(t,e){var i=n.getScaleFactor(t.src.width,t.src.height,e.width,e.height,r.transformTypes.FILL),o=a.assign({},e);return o.width=t.src.width*i,o.height=t.src.height*i,s(t,o)}(t,i));break;case r.fittingTypes.TILE_HORIZONTAL:case r.fittingTypes.TILE_VERTICAL:case r.fittingTypes.TILE:case r.fittingTypes.LEGACY_ORIGINAL_SIZE:case r.fittingTypes.ORIGINAL_SIZE:l=n.getAlignedRect(t.src,i,i.alignment),t.src.isCropped?(a.assign(t.parts[0],l),t.src.width=l.width,t.src.height=l.height):t.parts.push(o(l));break;case r.fittingTypes.LEGACY_STRIP_TILE_HORIZONTAL:case r.fittingTypes.LEGACY_STRIP_TILE_VERTICAL:case r.fittingTypes.LEGACY_STRIP_TILE:case r.fittingTypes.LEGACY_STRIP_ORIGINAL_SIZE:t.parts.push(function(t){return{transformType:r.transformTypes.LEGACY_CROP,width:Math.round(t.width),height:Math.round(t.height),alignment:n.getAlignment(t),upscale:!1,forceUSM:!1,scaleFactor:1,cssUpscaleNeeded:!1}}(i));break;case r.fittingTypes.LEGACY_STRIP_SCALE_TO_FIT:case r.fittingTypes.LEGACY_STRIP_FIT_AND_TILE:t.parts.push(function(t){return{transformType:r.transformTypes.FIT,width:Math.round(t.width),height:Math.round(t.height),upscale:!1,forceUSM:!0,scaleFactor:1,cssUpscaleNeeded:!1}}(i));break;case r.fittingTypes.LEGACY_STRIP_SCALE_TO_FILL:t.parts.push(function(t){return{transformType:r.transformTypes.LEGACY_FILL,width:Math.round(t.width),height:Math.round(t.height),alignment:n.getAlignment(t),upscale:!1,forceUSM:!0,scaleFactor:1,cssUpscaleNeeded:!1}}(i))}}}},function(t,e,i){"use strict";var a={isWEBP:{lossless:!1,lossy:!1,alpha:!1,animation:!1},isObjectFitBrowser:!1};t.exports={getFeature:function(t){return a[t]},setFeature:function(t,e){a[t]=e}}},function(t,e,i){"use strict";var a=i(0),r=i(1),n=i(5);t.exports={populateGlobalFeatureSupport:r.populateGlobalFeatureSupport,getData:function(t,e,i,s){var o=a.emptyData.uri;return r.isValidRequest(t,e,i)&&(o=n(t,e,i,s)),{uri:o}},fittingTypes:a.fittingTypes,alignTypes:a.alignTypes,htmlTag:a.htmlTag,upscaleMethods:a.upscaleMethods}},function(t,e,i){"use strict";var a=i(9),r=i(0);a.populateGlobalFeatureSupport();var n="https://static.wixstatic.com/",s="https://static.wixstatic.com/media/",o=/^media\//i;function l(t){return o.test(t)?""+n+t:""+s+t}t.exports={getScaleToFitImageURL:function(t,e,i,n,s,o){return l(a.getData(r.fittingTypes.SCALE_TO_FIT,{id:t,width:e,height:i},{width:n,height:s,htmlTag:a.htmlTag.IMG,alignment:a.alignTypes.CENTER,pixelAspectRatio:window.devicePixelRatio},o).uri)},getScaleToFillImageURL:function(t,e,i,n,s,o){return l(a.getData(r.fittingTypes.SCALE_TO_FILL,{id:t,width:e,height:i,focalPoint:{x:o&&o.focalPoint&&o.focalPoint.x,y:o&&o.focalPoint&&o.focalPoint.y}},{width:n,height:s,htmlTag:a.htmlTag.IMG,alignment:a.alignTypes.CENTER,pixelAspectRatio:window.devicePixelRatio},o).uri)},getCropImageURL:function(t,e,i,n,s,o,c,p,u,h){return l(a.getData(r.fittingTypes.SCALE_TO_FILL,{id:t,width:e,height:i,crop:{x:n,y:s,width:o,height:c}},{width:p,height:u,htmlTag:a.htmlTag.IMG,alignment:a.alignTypes.CENTER,pixelAspectRatio:window.devicePixelRatio},h).uri)}}}])});
//# sourceMappingURL=imageClientSDK.js.map