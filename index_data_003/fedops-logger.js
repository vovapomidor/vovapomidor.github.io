!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("fedopsLogger",[],e):"object"==typeof exports?exports.fedopsLogger=e():t.fedopsLogger=e()}("undefined"!=typeof self?self:this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="https://static.parastorage.com/services/fedops-logger/5.12.0/",n(n.s=18)}([function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a}));var r={},o=function(){return"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof WorkerGlobalScope?WorkerGlobalScope:r};function i(){return"undefined"!=typeof navigator&&navigator&&navigator.sendBeacon}function a(t){return navigator.sendBeacon(t)}}).call(this,n(19))},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return s})),n.d(e,"d",(function(){return u})),n.d(e,"e",(function(){return d}));var r=n(0);function o(t){return((Object(r.a)().fedops||{}).apps||{})[t]}function i(){Object(r.a)().fedops=Object(r.a)().fedops||{},Object(r.a)().fedops.apps=Object(r.a)().fedops.apps||{}}function a(t){i(),function(t){Object(r.a)().fedops.apps[t]=Object(r.a)().fedops.apps[t]||{}}(t)}function s(t){return(o(t)||{}).startLoadTime||0}function u(t,e){return(o(t)||{}).startLoadTime=e}function d(t){return(Object(r.a)().fedops||{}).sessionId=t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Host="frog.wix.com",e.LoggerVersion="2.0.270",function(t){t.Auto="auto",t.PostMessage="postMessage"}(e.PublishMethods||(e.PublishMethods={})),function(t){t[t.Unsupported=0]="Unsupported"}(e.Errors||(e.Errors={})),function(t){t.msid="_msid",t.clientId="_client_id",t.uuid="_uuid",t.visitorId="_visitorId",t.siteMemberId="_siteMemberId"}(e.EventContextMap||(e.EventContextMap={}))},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.name=n.constructor.name,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Error),e}();t.exports.defined=function(t,e){if(void 0===t)throw new o(e)},t.exports.object=function(t,e){if(void 0!==t&&("object"!==(void 0===t?"undefined":r(t))||Array.isArray(t)||null===t))throw new o(e)},t.exports.ok=function(t,e){if(!t)throw new o(e)},t.exports.func=function(t,e){if(void 0!==t&&"function"!=typeof t)throw new o(e)},t.exports.AssertionError=o},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e){var n=t.call(this,e)||this;return n.name=n.constructor.name,n}return o(e,t),e}(Error);e.AssertionError=i;var a=function(t){function e(e){var n=t.call(this,e)||this;return n.name=n.constructor.name,n}return o(e,t),e}(Error);e.APINotSupportedError=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.now=function(){return"undefined"!=typeof performance&&performance&&performance.now?performance.now():-1},e.getDesktopSize=function(t){return(t.screen&&t.screen.width||0)+"x"+(t.screen&&t.screen.height||0)},e.getWindowSize=function(t){var e=0,n=0;return t.innerWidth?(e=t.innerWidth,n=t.innerHeight):t.document&&(t.document.documentElement&&t.document.documentElement.clientWidth?(e=t.document.documentElement.clientWidth,n=t.document.documentElement.clientHeight):t.document.body&&t.document.body.clientWidth&&(e=t.document.body.clientWidth,n=t.document.body.clientHeight)),e+"x"+n},e.sendBeacon=function(t,e){return!("undefined"==typeof navigator||!navigator||!navigator.sendBeacon)&&navigator.sendBeacon(t,e)},e.readCookie=function(t){if("undefined"==typeof document)return null;for(var e=0,n=document.cookie.split(";");e<n.length;e++){for(var r=n[e].split("="),o=r[0],i=r[1];" "===o[0];)o=o.substr(1);if(o===t)return i}return""}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2).Host;e.setHost=function(t){r=t},e.getHost=function(){return r},e.isWebWorker=function(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope},e.requestWindow=function(t){if("undefined"!=typeof window&&window)try{return window.top===window.self?t?t(window):window:null}catch(t){return null}return null}},function(t){t.exports=JSON.parse('{"src":72,"persistentEndpoint":"performance","nonPersistentEndpoint":"fed","successRateRoot":"fedops_events","performanceRoot":"fedops_performance","appLoadStart":{"eventId":14},"appLoadFinish":{"eventId":11},"loadPhaseStart":{"eventId":12},"loadPhaseFinish":{"eventId":13},"interactionStart":{"eventId":15},"interactionEnd":{"eventId":16},"error":{"eventId":17},"resource":{"eventId":18}}')},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=n(3),i=n(22),a=i.mapValues,s=i.filterValues,u=n(23),d=n(24),c=n(25),p=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._publishers=e.publishers,this._validators=e.validators||[],this._defaults=e.defaults,this._events=e.events||{},this._context=n||{},this._defaultValueTimeout=e.defaultValueTimeout||5e3,this._defaultContinueOnFail=e.defaultContinueOnFail||!1,this._onPublisherFailHandler=e.onPublisherFailHandler||t._defaultPublisherFailHandler}return r(t,[{key:"log",value:function(t,e,n){var r=this;o.defined(t,"Event object or event key must be provided.");var i=this._extractEventAndContext(t,e,n),u=i.event,d=i.context,c=void 0!==d.useBatch?d.useBatch:this._context.useBatch;if(c){var p=this._initBuffer(c),f=s(this._defaults,(function(t){return"function"==typeof t})),h=a(f,(function(t){return t()}));return p.feed(Object.assign({},u,h),d)}return this._getDefaults().then((function(t){var e=Object.assign({},t,u);if(!(0===r._validators.length||r._validators.some((function(t){return t.match(e)&&(t.execute(e)||!0)}))))throw new Error("No validator accepted the event. Source: "+e.src+" Evid: "+(e.evid||e.evtId));return r._send(e,d)}))}},{key:"flush",value:function(){return this._buffer?this._buffer.flush():Promise.resolve()}},{key:"_send",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Promise.all(this._publishers.map((function(r){var o=Object.assign({},t);return Promise.resolve().then((function(){return r(o,Object.assign({},e._context,n))})).catch((function(t){return e._onPublisherFailHandler(t,{publisherName:r.name})}))}))).then((function(){}))}},{key:"_extractEventAndContext",value:function(t,e,n){var r=void 0,i={};if("string"!=typeof t)r=t,i=e||i;else{if(!(r=this._events[t]))throw new o.AssertionError("Event with key '"+t+"' not found in event map.");e&&(r=Object.assign({},r,e),i=n||i)}return{event:r,context:i}}},{key:"_initBuffer",value:function(t){var e=this,n=!0===t?300:t;return this._buffer||(this._buffer=new c(n).onFlush((function(n){var r=s(e._defaults,(function(t){return"function"!=typeof t}));return n.g=r,e._send(n,{useBatch:t})})))}},{key:"_handleDefaultsError",value:function(t){return this._defaultContinueOnFail?(d.error(t),null):Promise.reject(t)}},{key:"_getDefaults",value:function(){var t=this;if(!this._defaults)return Promise.resolve({});var e=a(this._defaults,(function(e,n){if("function"==typeof e)try{e=e()}catch(e){return t._handleDefaultsError(e)}return e&&"function"!=typeof e.then?e:u.timedPromise(e,{message:"Cannot get default value '"+n+" for BI Event'",timeout:t._defaultValueTimeout}).catch((function(e){return t._handleDefaultsError(e)}))}));return u.allAsObject(e)}}],[{key:"_defaultPublisherFailHandler",value:function(t,e){return e.publisherName}}]),t}();t.exports=p},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=n(3),i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.reset()}return r(t,[{key:"reset",value:function(){this._handlers=[]}},{key:"onLoggerCreated",value:function(t){o.defined(t,"Handler must be provided."),o.func(t,"Handler must be a function."),this._handlers.push(t)}},{key:"notifyLoggerCreated",value:function(t){this._handlers.forEach((function(e){return e(t)}))}}]),t}();t.exports={manager:new i,BiLoggerManager:i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),o=n(6),i=0;e.getCookies=function(t){return Object.keys(t).reduce((function(e,n){var o="string"==typeof t[n]?{name:t[n]}:t[n],i=o.name,a=o.transform,s=(void 0===a?function(t){return t}:a)(r.readCookie(i));return s&&(e[n]=s),e}),{})},e.buildBiUrl=function(t,e,n){var r=t.host,a=void 0===r?"":r,s=t.endpoint,u=void 0===s?"":s;void 0===n&&(n={}),a=a||o.getHost(),u=n.endpoint||u,n.useBatch||(e._=""+(new Date).getTime()+i++);var d=n.useBatch?[]:Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}),[]);return["//"+a+"/"+u].concat(d.length?d.join("&"):[]).join("?")},e.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}},function(t){t.exports=JSON.parse('{"src":72,"persistentEndpoint":"ds-performance","nonPersistentEndpoint":"ds-performance","successRateRoot":"ds_events","performanceRoot":"ds_performance","appLoadStart":{"eventId":31},"appLoadFinish":{"eventId":33},"interactionStart":{"eventId":34},"interactionEnd":{"eventId":35},"loadPhaseStart":{"eventId":38},"loadPhaseFinish":{"eventId":32},"error":{"eventId":36},"resource":{"eventId":37}}')},function(t){t.exports=JSON.parse('{"src":72,"persistentEndpoint":"editor-performance","nonPersistentEndpoint":"editor-performance","successRateRoot":"editor_events","performanceRoot":"editor_performance","appLoadStart":{"eventId":41},"appLoadFinish":{"eventId":43},"interactionStart":{"eventId":44},"interactionEnd":{"eventId":45},"loadPhaseStart":{"eventId":48},"loadPhaseFinish":{"eventId":42},"error":{"eventId":46},"resource":{"eventId":47}}')},function(t){t.exports=JSON.parse('{"src":72,"persistentEndpoint":"bolt-performance","nonPersistentEndpoint":"bolt-performance","successRateRoot":"bolt_events","performanceRoot":"bolt_performance","appLoadStart":{"eventId":21},"loadPhaseStart":{"eventId":28},"loadPhaseFinish":{"eventId":22},"appLoadFinish":{"eventId":23},"interactionStart":{"eventId":24},"interactionEnd":{"eventId":25},"error":{"eventId":26},"resource":{"eventId":27}}')},function(t){t.exports=JSON.parse('{"src":72,"persistentEndpoint":"ooi-performance","nonPersistentEndpoint":"ooi-performance","successRateRoot":"fedops_events","performanceRoot":"fedops_performance","appLoadStart":{"eventId":61},"appLoadFinish":{"eventId":63},"interactionStart":{"eventId":64},"interactionEnd":{"eventId":65},"loadPhaseStart":{"eventId":68},"loadPhaseFinish":{"eventId":62},"error":{"eventId":66},"resource":{"eventId":67}}')},function(t){t.exports=JSON.parse('{"src":72,"persistentEndpoint":"mobile-performance","nonPersistentEndpoint":"mobile-performance","successRateRoot":"fedops_events","performanceRoot":"fedops_performance","appLoadStart":{"eventId":51},"appLoadFinish":{"eventId":53},"interactionStart":{"eventId":54},"interactionEnd":{"eventId":55},"loadPhaseStart":{"eventId":58},"loadPhaseFinish":{"eventId":52},"error":{"eventId":56},"resource":{"eventId":57}}')},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=n(20),a=o(n(27)),s=n(28),u=n(10),d=n(2),c=n(2);e.PublishMethods=c.PublishMethods;var p=n(6);e.setHost=p.setHost;var f=function(t){return Object.keys(t).reduce((function(e,n){return d.EventContextMap[n]&&(e[d.EventContextMap[n]]=t[n]),e}),{})},h=function(){function t(t){var e;void 0===t&&(t={}),this.options=t,this.initialized=!1,this.muted=!1,a.ok(!t.publishMethod||(e=t.publishMethod,-1!==Object.keys(d.PublishMethods).map((function(t){return d.PublishMethods[t]})).indexOf(e)),'Unsupported publish method "'+t.publishMethod+'"'),this.loggerClientFactory=i.factory(),this.withUserContext(u.getCookies({clientId:"_wixCIDX",uuid:{name:"_wixUIDX",transform:function(t){return"string"==typeof t&&t.split("|")[1]}}}))}return t.prototype.initFactory=function(){if(this.initialized)return this.loggerClientFactory;this.initialized=!0;var t=s.getPublisher(this.options,this.transformer,this.publishFunctions);return this.loggerClientFactory.addPublisher(t)},t.prototype.withTransformer=function(t){return a.defined(t,"Transformer must be provided"),a.ok("function"==typeof t||t&&"function"==typeof t.postMessage,"Valid transformer must be provided"),this.transformer=t,this},t.prototype.withPublishFunction=function(t){return a.defined(t,"Publish function must be provided"),a.ok(t&&"function"==typeof t.postMessage,"Valid publish function must be provided"),this.publishFunctions=t,this},t.prototype.withUserContext=function(t){return a.defined(t,"User context object must be provided"),this.updateDefaults(f(t)),this},t.prototype.withUoUContext=function(t){return a.defined(t,"UoU context object must be provided"),this.updateDefaults(f(t)),this},t.prototype.updateDefaults=function(t){return this.loggerClientFactory.updateDefaults(t),this},t.prototype.setMuted=function(t){return this.muted=t,this},t.prototype.onError=function(t){return this.loggerClientFactory.setPublisherFailHandler(t),this},t.prototype.logger=function(t){void 0===t&&(t={});var e=this,n=void 0!==t.useBatch?t.useBatch:this.options.useBatch,o=this.initFactory().logger(r({},t,{useBatch:n}));return{log:function(t,n){return e.muted?Promise.resolve():o.log(t,n)}}},t}();e.Factory=h,e.factory=function(t){return void 0===t&&(t={}),new h(t)},e.manager=i.manager},function(t,e,n){var r=n(30),o=n(31);t.exports=function(t,e,n){var i=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var s=0;s<16;++s)e[i+s]=a[s];return e||o(a)}},function(t,e,n){"use strict";n.r(e),n.d(e,"create",(function(){return ut})),n.d(e,"reportAppLoadStarted",(function(){return dt})),n.d(e,"phasesConfig",(function(){return ct}));var r=n(7),o=n(11),i=n(12),a=n(13),s=n(14),u=n(15),d="DEFAULT",c="DS",p="EDITOR",f="OOI",h="BOLT",l="MOBILE";function m(t){switch(t){case d:return r;case h:return a;case c:return o;case p:return i;case f:return s;case l:return u;default:return r}}var v,g=n(0),b=n(16),I=function(){function t(t){var e=void 0===t?{}:t,n=e.biLoggerFactory,r=e.baseUrl,o=e.endpoint,i=e.preset;this.preset=i,this.factory=n||b.factory({host:r}),this.persistentPublisher=this.factory.logger({endpoint:this.preset.persistentEndpoint}),this.nonPersistentPublisher=this.factory.logger({endpoint:o||this.preset.nonPersistentEndpoint})}return t.prototype.report=function(t,e){if(!t)return null;switch(e){case this.preset.persistentEndpoint:return this.persistentPublisher.log(t);default:return this.nonPersistentPublisher.log(t)}},t}();function _(t){var e=void 0===t?{}:t,n=e.biLoggerFactory,r=e.baseUrl,o=e.endpoint,i=e.preset;return v?v({preset:i}):new I({biLoggerFactory:n,baseUrl:r,endpoint:o,preset:i})}var y=n(17),P=n.n(y),O=function(){var t=[];try{return Object(g.a)()&&Object(g.a)().performance&&Object(g.a)().performance.getEntriesByType&&Object(g.a)().performance.getEntriesByType("resource")||t}catch(e){return t}},w=function(){Object(g.a)()&&Object(g.a)().performance&&Object(g.a)().performance.clearResourceTimings&&Object(g.a)().performance.clearResourceTimings()},S=function(){return Object(g.a)()&&Object(g.a)().performance&&Object(g.a)().performance.now?Object(g.a)().performance.now():"undefined"!=typeof performance&&performance&&performance.now?performance.now():(new Date).getTime()},x=function(){if("undefined"!=typeof performance&&performance&&performance.timing&&performance.timing.responseEnd&&performance.timing.fetchStart)return performance.timing.responseEnd-performance.timing.fetchStart},E=function(t){Object(g.a)()&&Object(g.a)().performance&&Object(g.a)().performance.mark&&Object(g.a)().performance.mark(t)},j=function(t,e,n){Object(g.a)()&&Object(g.a)().performance&&Object(g.a)().performance.measure&&Object(g.a)().performance.measure(t,e,n)},T=n(1),A=function(){function t(t){this.appName=t,this.apps={},this.apps[t]={}}var e=t.prototype;return e._getKeyForApp=function(t,e){return void 0===t&&(t=this.appName),e?t+"_"+e:t},e.setLoadStarted=function(t){var e=void 0===t?{}:t,n=e.appId,r=e.widgetId,o=this._getKeyForApp(n,r);this.apps[o]||(this.apps[o]={});var i=S();this.apps[o].startLoadTime=i,n||Object(T.d)(o,i)},e.getLoadStartTime=function(t){var e=void 0===t?{}:t,n=e.appId,r=e.widgetId,o=this._getKeyForApp(n,r),i=this.getLoadStartTimeFromInstance(o)||Object(T.a)(o)||0;return Math.floor(i)},e.getLoadStartTimeFromInstance=function(t){return this.apps[t]&&this.apps[t].startLoadTime},e.getAppLoadTime=function(t){var e=void 0===t?{}:t,n=e.appId,r=e.widgetId;return Math.floor(S()-this.getLoadStartTime({appId:n,widgetId:r}))},e.getFirstRequestDuration=function(t){var e=void 0===t?{}:t,n=e.appId,r=e.widgetId;return this.getLoadStartTime({appId:n,widgetId:r})},t}(),N=function(){function t(t){void 0===t&&(t=void 0),this.data=t}var e=t.prototype;return e.isActive=function(){return!0},e.export=function(){return this.data},t}(),k=function(){function t(t){var e=this;void 0===t&&(t=null),this.items=[],t&&(void 0===t.length?[t]:t).forEach((function(t){return e.addItem(t)}))}var e=t.prototype;return e.clone=function(){return new t(this.items.slice())},e.addItem=function(t){return this.items.push(t instanceof N?t:new N(t)),this},e.mergeItems=function(){for(var t={},e=0;e<this.items.length;e++){var n=this.items[e];if(!n.isActive()){t=null;break}var r=n.export();for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])}return t},t}(),L=function(t){try{return Object(g.a)().localStorage&&Object(g.a)().localStorage.getItem(t)}catch(t){}},F=function(t,e){try{return Object(g.a)().localStorage&&Object(g.a)().localStorage.setItem(t,e)}catch(t){}},C={getSessionId:function(){var t=void 0!==Object(g.a)()&&Object(g.a)().fedops&&Object(g.a)().fedops.sessionId;return t=(t=t||L("fedops.logger.sessionId"))||this.generateGuid(),Object(T.e)(t),F("fedops.logger.sessionId",t),t},generateGuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}},D=function(){function t(t,e){this.appName=t,this.phases=new Map,this.indexToKey=new Map,this.times=e||new A(t)}t._getIndexForPhase=function(t){var e=t.name,n=t.appId,r=void 0===n?"":n,o=t.widgetId;return e+"_"+r+"_"+(void 0===o?"":o)};var e=t.prototype;return e.getAppLoadingPhaseData=function(e){var n=e.name,r=e.appId,o=e.widgetId;return this.phases.get(t._getIndexForPhase({name:n,appId:r,widgetId:o}))},e.saveLoadingPhase=function(e){var n=e.name,r=e.appId,o=e.widgetId,i=t._getIndexForPhase({name:n,appId:r,widgetId:o});if(!this.phases.has(i)){var a=this.phases.size;this.phases.set(i,{name:n,phaseStartTime:S(),index:a}),this.indexToKey.set(a,i)}},e.endLoadingPhase=function(e){var n=e.name,r=e.appId,o=e.widgetId,i=e.widgetArray,a=t._getIndexForPhase({name:n,appId:r,widgetId:o});if(this.phases.has(a)&&!this.phases.get(a).duration){var s=this.phases.get(a);s.duration=S()-s.phaseStartTime,i&&(s.widgetArray=i),o&&(s.widgetId=o),this.phases.set(a,s)}},e.getNextPhaseToReport=function(){var t=this.phases.size-1,e=this.indexToKey.get(t);return this.phases.get(e)},e.getPhasePreviousTo=function(e){var n=e.name,r=e.appId,o=e.widgetId,i=this.phases.get(t._getIndexForPhase({name:n,appId:r,widgetId:o})),a=this.indexToKey.get(i.index-1);return this.phases.get(a)},e.getPhases=function(t){var e=(void 0===t?{}:t).appId;return Array.from(this.phases).filter((function(t){var n=t[0].split("_")[1];return e&&n===e||!e})).map((function(t){return function(t){var e;return(e={})[t.name]=t,e}(t[1])}))},e.createCodeParsingPhaseIfNotExist=function(e){var n=void 0===e?{}:e,r=n.appId,o=n.widgetId,i=t._getIndexForPhase({name:"codeParsingPhase",appId:r,widgetId:o});if(!this.phases.has(i)){var a=this.times.getLoadStartTime({appId:r,widgetId:o});this.phases.set(i,{phaseStartTime:a,index:0,name:"codeParsingPhase"}),this.indexToKey.set(0,i)}},t}();var M=function(t){var e,n;function r(e){var n,r=e.appId,o=e.widgetId,i=e.isServerSide,a=e.widgetArray;return(n=t.call(this)||this).data=n._filterUndefined({appId:r,widgetId:o,isServerSide:i,widgetArray:a}),n}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,r.prototype._filterUndefined=function(t){var e={};return Object.keys(t).forEach((function(n){t[n]&&(e[n]=t[n])})),e},r}(N),H=function(){return void 0!==Object(g.a)()&&Object(g.a)().location},R=function(){return H()&&Object(g.a)().location.host},B=function(){return((H()||{}).search||"").indexOf("fedops=dev")>-1};var V={xmlhttprequest:{count:"countXhr",unsupported:"unsprtXhr",duration:"timeXhr",total:"sizeXhr",longest:"longXhr",http2:"h2Xhr"},script:{count:"countJs",unsupported:"unsprtJs",duration:"timeJs",total:"sizeJs",cached:"cachedJs",http2:"h2Js"},link:{count:"countCss",unsupported:"unsprtCss",duration:"timeCss",total:"sizeCss",cached:"cachedCss",http2:"h2Css"},img:{count:"countImg",unsupported:"unsprtImg",duration:"timeImg",total:"sizeImg",cached:"cachedImages",http2:"h2Images"}},U={link:function(t){return/(.\.css$|.\.css?.)/g.test(t.name)}},J=function(t){return t.responseEnd-t.startTime};function W(t,e){var n=U[e];return t.filter((function(t){return e===t.initiatorType&&(!n||n(t))}))}function z(t){return!t.name.match(/http(s)?:\/\/frog.wix.com\//)}function G(t){return e=t.name,(n=R())&&-1===e.indexOf(n)&&0===t.transferSize&&0===t.requestStart;var e,n}function X(t){var e=t.filter((function(t){return!G(t)}));return Object.keys(V).reduce((function(n,r){var o=W(t,r),i=W(e,r),a=V[r];return n[a.count]=i.length,n[a.duration]=function(t){if(0===t.length)return 0;var e={startTime:1/0,responseEnd:0};return t.forEach((function(t){e.startTime>t.startTime&&(e.startTime=t.startTime),e.responseEnd<t.responseEnd&&(e.responseEnd=t.responseEnd)})),e.responseEnd-e.startTime}(i),n[a.total]=function(t){return t.reduce((function(t,e){return t+e.transferSize}),0)}(i),n[a.unsupported]=function(t){var e=t.length;if(0===e)return 0;var n=t.filter(G).length;return Math.round(n/e*100)}(o),n[a.http2]=function(t){if(0===t.length)return 0;var e=!1,n=Math.round(t.filter((function(t){return e=e||"nextHopProtocol"in t,"h2"===t.nextHopProtocol})).length/t.length*100);return e?n:NaN}(o),a.longest&&(n[a.longest]=function(t){if(0===t.length)return 0;var e=t.reduce((function(t,e){return J(e)>=J(t)?e:t}));return J(e)}(i)),a.cached&&(n[a.cached]=function(t){if(0===t.length)return 0;var e=t.filter((function(t){return 0===t.transferSize}));return Math.round(e.length/t.length*100)}(i)),n}),{})}function q(t){return{url:t.name,downloadDuration:t.responseEnd-t.startTime,bytesTransferred:t.transferSize,isHTTP2:"h2"===t.nextHopProtocol}}var K=function(t){var e,n;function r(){return t.apply(this,arguments)||this}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,r.prototype.performNetworkAnalysis=function(t){if(0===t.length)return null;var e=S(),n=t.filter(z),r=X(n);r.overhead=S()-e;var o=function(t){return Object.keys(t).reduce((function(e,n){var r=parseInt(t[n]);return isNaN(r)||"number"!=typeof r||(e[n]=r),e}),{})}(r);if(console.debug&&B()){var i=function(t){var e=t.reduce((function(t,e){return G(e)?t.unsupported.push(e):t.supported.push(e),t}),{supported:[],unsupported:[]});return Object.keys(V).reduce((function(t,n){return t[n]={},t[n].supported=W(e.supported,n).map((function(t){return q(t)})),t[n].unsupported=W(e.unsupported,n).map((function(t){return q(t)})),t}),{})}(n);console.debug("[fedops network analysis] [bytes analysis]\n"+JSON.stringify(o,null,4)),console.debug("[fedops network analysis] [resources breakdown]\n",i)}return o},r}(N);var $=function(t){var e,n;function r(e){return t.call(this,{duration:e})||this}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,r.prototype.setFirstRequestDuration=function(t){return this.data.frd=t,this},r}(N);function Q(t){var e=0;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return Y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(t,e)}(t)))return function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(e=t[Symbol.iterator]()).next.bind(e)}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Z(t){delete t[Object.getOwnPropertyNames(t)[0]].index}var tt=function(){function t(t,e){this._sessionId=t,this._preset=e}var e=t.prototype;return e.biAppLoadStart=function(){return this._biDataItem(this._preset.appLoadStart.eventId)},e.biAppLoadFinish=function(){return this._biDataItem(this._preset.appLoadFinish.eventId)},e.biInteractionStart=function(){return this._biDataItem(this._preset.interactionStart.eventId)},e.biInteractionEnd=function(){return this._biDataItem(this._preset.interactionEnd.eventId)},e.biLoadPhaseStart=function(){return this._biDataItem(this._preset.loadPhaseStart.eventId)},e.biLoadPhaseFinish=function(){return this._biDataItem(this._preset.loadPhaseFinish.eventId)},e.biError=function(){return this._biDataItem(this._preset.error.eventId)},e.appName=function(t){var e=t.appName,n=t.isServerSide;return this.dataItem({appName:n?e+"_ssr":e})},e.artifact=function(t){var e=t.id,n=t.version,r=t.isRollout;return this.dataItem({artifactId:e,artifactVersion:n,isRollout:r})},e.appContext=function(t){return new M(t)},e.customParams=function(t){return this.dataItem({customParams:t})},e.duration=function(t){return new $(t)},e.loadingPhaseCollection=function(t){var e=JSON.stringify(function(t){for(var e,n={},r=Q(t);!(e=r()).done;){var o=e.value;Z(o),n=Object.assign(n,o)}return n}(t));return this.dataItem({phases:e})},e.loadingPhaseStart=function(t){var e=t.name;return this.dataItem({name:e})},e.loadingPhaseFinish=function(t){var e=t.name,n=function(t){return Math.floor(S()-t)}(t.phaseStartTime);return this.dataItem({name:e,duration:n})},e.loadingPhaseFinishPrefixed=function(t){var e=t.name,n=t.index,r=t.phaseStartTime,o=function(t,e){return("0"+e).slice(-2)+"_"+t}(e,n);return this.loadingPhaseFinish({name:o,phaseStartTime:r})},e.resource=function(){var t=this._asBiEvent(this._preset.resource.eventId);return new K(t)},e.dataItem=function(t){return new N(t)},e._biDataItem=function(t){var e=this._asBiEvent(t);return this.dataItem(e)},e._asBiEvent=function(t){return{src:this._preset.src,evid:t,session_id:this._sessionId,_:(new Date).getTime()}},t}(),et={SEND_ON_START:"SEND_ON_START",SEND_ON_FINISH:"SEND_ON_FINISH",SEND_ON_APP_LOADED:"SEND_ON_APP_LOADED",SEND_START_AND_FINISH:"SEND_START_AND_FINISH"};function nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var rt=function(t,e){if(t)return t(e)},ot=function(){function t(t,e,n,r){var o={appId:null,widgetId:null,metasiteId:null,sessionId:C.getSessionId(),isServerSide:null,disableAutoLoadFinish:!1,phasesConfig:et.SEND_ON_START,interactionTimeout:null,timeoutHook:null,startHook:null,endHook:null,isPersistent:!1,corrId:P()(),presetType:d,customParams:{},paramsOverrides:{}},i=Object.assign({},o,r);this.appName=t,this.appVersion=e,this.appId=i.appId,this.widgetId=i.widgetId,this.metasiteId=i.metasiteId,this.corrId=i.corrId,this.isServerSide=i.isServerSide,this.params={sessionId:i.sessionId},this._customParams=Object.assign({},i.customParams),this.disableAutoLoadFinish=i.disableAutoLoadFinish,this.phasesConfig=i.phasesConfig,this._appLoadedCalled={},this._appStartLoadCalled={},this._presetType=i.presetType,this._preset=m(this._presetType),this.dataItems=new tt(this.sessionId,this._preset),this.reporter=n||_({preset:this._preset}),this.times=new A(t),this.loadingPhases=new D(t,this.times),this.dataSourceBase=new k,this.dataSourceBase.addItem(this.dataItems.appName({appName:t,isServerSide:this.isServerSide})).addItem(this.dataItems.dataItem({corrId:this.corrId})).addItem(this.dataItems.dataItem(i.paramsOverrides)),r&&r.artifactData&&this.dataSourceBase.addItem(this.dataItems.artifact(r.artifactData)),this._outgoingInteractions={},this.interactionTimeout=i.interactionTimeout,this.timeoutHook=i.timeoutHook,this.startHook=i.startHook,this.endHook=i.endHook,this.isPersistent=i.isPersistent}var e,n,r,o=t.prototype;return o._report=function(t,e){return this.reporter.report(t.mergeItems(),e)},o.getAppName=function(){return this.appName},o.getAppVersion=function(){return this.appVersion},o.getReporter=function(){return this.reporter},o.getParam=function(t){return this.params[t]},o._isDisableAutoLoadFinish=function(){return this.disableAutoLoadFinish},o.isDisableAutoLoadFinish=function(){return this._isDisableAutoLoadFinish()},o.reportNetworkAnalysis=function(t){var e=this,n=t.appId,r=O();setTimeout((function(){try{var t=e.dataItems.resource(),o=t.performNetworkAnalysis(r);if(!o)return;var i=e.dataSource.addItem(t).addItem(o);n&&e._changeAppNameForEvent(i,n),e._report(i)}catch(t){console.error("[fedops] Failed to report resource metrics",t)}}),1e3)},o.appLoadStarted=function(e){var n=void 0===e?{}:e,r=n.appId,o=n.paramsOverrides;if(!(r&&this._appStartLoadCalled[r]||!r&&this._appStartLoadCalled[this.appName])){t._markAppLoadStarted(this.appName),this._appStartLoadCalled[r||this.appName]=!0,this.times.setLoadStarted({appId:r});var i=this.dataSource.addItem(this.dataItems.biAppLoadStart()).addItem(this.dataItems.appContext({appId:r||this.appId,widgetId:this.widgetId,isServerSide:this.isServerSide})).addItem(this.dataItems.dataItem(o));return r&&this._changeAppNameForEvent(i,r),this._report(i,this._getEndpoint())}},o._shouldAddCustomParams=function(t){var e=function(t){return t&&0===Object.keys(t).length&&t.constructor===Object};return!(e(this._customParams)&&e(t))},o._addCustomParamsToEvent=function(t,e){var n="string"==typeof e?JSON.parse(e):e;if(e=Object.assign({},this._customParams,n),Object.keys(e).length>0){var r=JSON.stringify(e);t.addItem(this.dataItems.customParams(r))}},o._isOverridingTimeAllowed=function(){return this._presetType===l},o.appLoaded=function(e){var n=void 0===e?{}:e,r=n.appId,o=n.customParams,i=n.paramsOverrides;if(!(r&&this._appLoadedCalled[r]||!r&&this._appLoadedCalled[this.appName])){t._clearLoadTimeout(),t._markAndMeasureAppLoad(this.appName),this._appLoadedCalled[r||this.appName]=!0,this._sendLastAppLoadPhaseIfNeeded(),this.reportNetworkAnalysis({appId:r});var a=this.dataSource.addItem(this.dataItems.biAppLoadFinish()).addItem(this.dataItems.appContext({appId:r||this.appId,widgetId:this.widgetId,isServerSide:this.isServerSide})).addItem(this.dataItems.duration(this.times.getAppLoadTime({appId:r})).setFirstRequestDuration(this.times.getFirstRequestDuration())).addItem(this.dataItems.dataItem(i));if(r&&this._changeAppNameForEvent(a,r),this._shouldAddCustomParams(o)&&this._addCustomParamsToEvent(a,o),this.phasesConfig===et.SEND_ON_APP_LOADED){var s=this.loadingPhases.getPhases({appId:r});s.length>0&&a.addItem(this.dataItems.loadingPhaseCollection(s))}return this._report(a,this._getEndpoint())}},o.appLoadingPhaseStart=function(t,e){var n=void 0===e?{}:e,r=n.appId,o=n.widgetId,i=n.paramsOverrides;if(this.phasesConfig===et.SEND_ON_START&&this.loadingPhases.createCodeParsingPhaseIfNotExist({appId:r,widgetId:o}),this.loadingPhases.saveLoadingPhase({name:t,appId:r,widgetId:o}),this._sendPreviousPhaseIfNeeded(t,{appId:r,widgetId:o,paramsOverrides:i}),E("[fedops] "+t+" started"),this.phasesConfig===et.SEND_START_AND_FINISH){var a=this.dataSource.addItem(this.dataItems.biLoadPhaseStart()).addItem(this.dataItems.appContext({appId:r,widgetId:o})).addItem(this.dataItems.loadingPhaseStart({name:t})).addItem(this.dataItems.dataItem(i));r&&this._changeAppNameForEvent(a,r),this._report(a,this._getEndpoint())}},o._changeAppNameForEvent=function(t,e){t.addItem(this.dataItems.appName({appName:e,isServerSide:this.isServerSide}))},o._sendPreviousPhaseIfNeeded=function(t,e){var n=void 0===e?{}:e,r=n.appId,o=n.widgetId,i=n.paramsOverrides;if(this.phasesConfig===et.SEND_ON_START){var a=this.loadingPhases.getPhasePreviousTo({name:t,appId:r,widgetId:o});E("[fedops] "+a.name+" finished");var s=this.dataItems.loadingPhaseFinishPrefixed(a),u=this.dataItems.biLoadPhaseFinish(),d=this.dataItems.dataItem(i),c=this.dataSource.addItem(s).addItem(u).addItem(d);this._report(c)}},o.appLoadingPhaseFinish=function(t,e){var n=void 0===e?{}:e,r=n.appId,o=n.widgetId,i=n.widgetArray,a=n.paramsOverrides;if(this.phasesConfig===et.SEND_ON_START)throw new Error('To use appLoadingPhaseFinish you must create the logger with the "phasesConfig: SEND_ON_FINISH, SEND_ON_APP_LOADED or SEND_START_AND_FINISH" param');if(E("[fedops] "+t+" finished"),this.phasesConfig!==et.SEND_ON_APP_LOADED){var s=this.loadingPhases.getAppLoadingPhaseData({name:t,appId:r,widgetId:o});if(!s)throw new Error("Cannot report end of a phase that wasn't started. Phase "+t+" doesn't exist");var u=this.dataItems.loadingPhaseFinish(s),d=this.dataItems.biLoadPhaseFinish(),c=this.dataItems.dataItem(a),p=this.dataItems.appContext({appId:r,widgetId:o,widgetArray:i,isServerSide:this.isServerSide}),f=this.dataSource.addItem(u).addItem(d).addItem(p).addItem(c);return r&&this._changeAppNameForEvent(f,r),this._report(f,this._getEndpoint())}this.loadingPhases.endLoadingPhase({name:t,appId:r,widgetId:o,widgetArray:i})},o._getEndpoint=function(){return this.isPersistent?this._preset.persistentEndpoint:this._preset.nonPersistentEndpoint},o._sendLastAppLoadPhaseIfNeeded=function(){var t=this.loadingPhases.getNextPhaseToReport();this.phasesConfig===et.SEND_ON_START&&t&&"codeParsingPhase"!==t.name&&this._report(this.dataSource.addItem(this.dataItems.loadingPhaseFinishPrefixed(t)).addItem(this.dataItems.biLoadPhaseFinish()))},t._clearLoadTimeout=function(){Object(g.a)()&&Object(g.a)().fedops&&"function"==typeof Object(g.a)().fedops.clearLoadTimeout&&Object(g.a)().fedops.clearLoadTimeout()},o.clearResourceTimings=function(){w()},t._markAppLoadStarted=function(t){E("[fedops] "+t+" app-load-started")},t._markAndMeasureAppLoad=function(t){E("[fedops] "+t+" app-loaded");try{j("[fedops] "+t+" app-loaded","[fedops] "+t+" app-load-started","[fedops] "+t+" app-loaded")}catch(t){}},t._markInteractionStarted=function(t){E("[fedops] "+t+" started")},t._markAndMeasureInteractionEnded=function(t,e){if(e){E("[fedops] "+t+" ended");try{j("[fedops] "+t+" duration","[fedops] "+t+" started","[fedops] "+t+" ended")}catch(t){}}},o.interactionStarted=function(e,n){var r=this,o=void 0===n?{}:n,i=o.timeOverride,a=o.interactionTimeout,s=o.startHook,u=o.timeoutHook,d=o.customParams;if(i&&!this._isOverridingTimeAllowed())throw new Error("Overriding time parameter of interaction is not permitted");t._markInteractionStarted(e);var c=this.dataSource.addItem({name:e}).addItem(this.dataItems.biInteractionStart());return this._shouldAddCustomParams(d)&&this._addCustomParamsToEvent(c,d),this._outgoingInteractions[e]={timestamp:i||S(),timeout:a||this.interactionTimeout},this._report(c),rt(s||this.startHook,{name:e}),{timeoutId:function(){if(a||r.interactionTimeout)return setTimeout((function(){var t=r.dataSource.addItem({interactionName:e}).addItem({errorType:"timeout"}).addItem(r.dataItems.biError());r._report(t),rt(u||r.timeoutHook,{name:e,timeout:a||r.interactionTimeout})}),a||r.interactionTimeout)}()}},o.interactionEnded=function(e,n){var r=this,o=void 0===n?{}:n,i=o.timeOverride,a=o.timeoutId,s=o.endHook,u=o.customParams;if(i&&!this._isOverridingTimeAllowed())throw new Error("Overriding time parameter of interaction is not permitted");var d=this._outgoingInteractions[e];t._markAndMeasureInteractionEnded(e,d),a&&clearTimeout(a);var c,p=this._outgoingInteractions[e]||(c=Object(g.a)()).fedops&&c.fedops.apps&&c.fedops.apps[r.appName]&&c.fedops.apps[r.appName].interactions&&c.fedops.apps[r.appName].interactions[e],f=i||S(),h=p?Math.floor(f-p.timestamp):"";rt(s||this.endHook,{name:e,duration:h,timeout:this._outgoingInteractions[e]&&this._outgoingInteractions[e].timeout});var l=this.dataSource.addItem({name:e}).addItem({duration:h}).addItem(this.dataItems.biInteractionEnd());this._shouldAddCustomParams(u)&&this._addCustomParamsToEvent(l,u),delete this._outgoingInteractions[e],this._report(l)},o.getLoggerForWidget=function(e){var n=e.appName,r=e.appId,o=e.widgetId,i=e.version,a=e.timeoutHook,s=e.startHook,u=e.endHook,d=e.useGlobalLogger,c=e.paramsOverrides,p=e.phasesConfig;return new t(n||r+"_"+o,i||this.getAppVersion(),d?this.reporter:_({biLoggerFactory:this.reporter.factory,preset:this._preset}),{isServerSide:this.isServerSide,appId:r,widgetId:o,sessionId:this.sessionId,phasesConfig:p||et.SEND_ON_START,isPersistent:this.isPersistent,timeoutHook:a,startHook:s,endHook:u,customParams:this._customParams,presetType:this._presetType,paramsOverrides:c})},e=t,(n=[{key:"dataSource",get:function(){return this.dataSourceBase.clone()}},{key:"sessionId",get:function(){return this.getParam("sessionId")},set:function(t){this.params.sessionId=t}}])&&nt(e.prototype,n),r&&nt(e,r),t}();function it(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function at(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?it(Object(n),!0).forEach((function(e){st(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function st(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ut(t,e){if(void 0===e&&(e={}),!t)return null;var n=t.replace(/\./g,"-");Object(T.c)(n);var r=at(at({},e),{},{preset:m(e.presetType)}),o=_(r);return new ot(n,Object(g.a)().__CI_APP_VERSION__||"0.0.0",o,r)}function dt(t,e){var n=void 0===e?{}:e,r=n.artifactData,o=n.presetType,i=n.isPersistent,a=n.paramsOverrides;Object(T.c)(t),Object(T.d)(t,x()||S());var s=C.getSessionId();Object(T.e)(s);var u=m(o),d=!0===i?u.persistentEndpoint:u.nonPersistentEndpoint,c=new URLSearchParams;c.set("appName",t),c.set("src",u.src),c.set("evid",u.appLoadStart.eventId),c.set("session_id",s),c.set("_",Math.random()),r&&(c.set("artifactId",r.id),c.set("artifactVersion",r.version),c.set("isRollout",r.isRollout)),Object.keys(a||{}).forEach((function(t){return c.set(t,a[t])}));var p="//frog.wix.com/"+d+"?"+c.toString();Object(g.b)()?Object(g.c)(p):(new Image).src=p}var ct=et},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r=n(21),o=n(8),i=n(9);t.exports.BiLoggerFactory=r,t.exports.BiLogger=o,t.exports.BiLoggerManager=i.BiLoggerManager,t.exports.factory=function(){return new r},t.exports.manager=i.manager},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=n(3),a=n(8),s=n(9),u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._publishers=[],this._validators=[],this._defaults={},this._events={}}return o(t,[{key:"addPublisher",value:function(t){return i.defined(t,"Publisher must be provided"),i.ok("function"==typeof t,"Expected a publisher function"),this._publishers.push(t),this}},{key:"addValidator",value:function(t){return i.defined(t,"Validator must be provided"),i.ok("object"===(void 0===t?"undefined":r(t))&&t,"Expected a validator object"),i.ok(t.execute&&t.match,"Provided validator does not match the interface"),this._validators.push(t),this}},{key:"setDefaults",value:function(t){return i.defined(t,"Defaults must be provided"),i.object(t,"Defaults must be an object"),this._defaults=t,this}},{key:"updateDefaults",value:function(t){return i.defined(t,"Defaults must be provided"),i.object(t,"Defaults must be an object"),Object.assign(this._defaults,t),this}},{key:"setEvents",value:function(t){return i.defined(t,"Events must be provided"),i.object(t,"Events must be an object"),this._events=t,this}},{key:"setDefaultValueTimeout",value:function(t){return i.defined(t,"Default Value Timeout must be provided"),this._defaultValueTimeout=t,this}},{key:"setDefaultContinueOnFail",value:function(t){return i.defined(t,"Default Continue On Fail must be provided"),this._defaultContinueOnFail=t,this}},{key:"setPublisherFailHandler",value:function(t){return i.defined(t,"Publisher Fail Handler must be provided"),this._onPublisherFailHandler=t,this}},{key:"logger",value:function(t){var e=new a({publishers:this._publishers,validators:this._validators,defaults:this._defaults,events:this._events,defaultValueTimeout:this._defaultValueTimeout,defaultContinueOnFail:this._defaultContinueOnFail,onPublisherFailHandler:this._onPublisherFailHandler},t);return s.manager.notifyLoggerCreated(e),e}}]),t}();t.exports=u},function(t,e,n){"use strict";t.exports.mapValues=function(t,e){return t?Object.keys(t).reduce((function(n,r){return n[r]=e(t[r],r,t),n}),{}):{}},t.exports.filterValues=function(t,e){return t?Object.keys(t).reduce((function(n,r){return e(t[r],r,t)&&(n[r]=t[r]),n}),{}):{}}},function(t,e,n){"use strict";t.exports.timedPromise=function(t,e){var n=e.message,r=e.timeout,o=new Promise((function(t,e){setTimeout(e,r,n?"Timeout: "+n:"Timeout")}));return Promise.race([t,o])},t.exports.allAsObject=function(t){var e=Object.keys(t);return Promise.all(e.map((function(e){return t[e]}))).then((function(t){return t.reduce((function(t,n,r){return t[e[r]]=n,t}),{})}))}},function(t,e,n){"use strict";t.exports={error:function(){var t;console&&console.error&&(t=console).error.apply(t,arguments)}}},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=n(26),i=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._flushHandler=function(t){return t},this._flushDebounced=o((function(){return n.flush()}),e),this._init()}return r(t,[{key:"_init",value:function(){var t=this;this._startTime=Date.now(),this._events=[],this._resolve=null,this._promise=new Promise((function(e){return t._resolve=e}))}},{key:"flush",value:function(){if(!this._events.length)return Promise.resolve();var t=this._events,e=this._resolve,n=this._startTime;return this._init(),this._flushHandler(function(t,e){return{dt:Date.now()-e,e:t}}(t,n)).then(e)}},{key:"onFlush",value:function(t){return this._flushHandler=t,this}},{key:"feed",value:function(t,e){return this._events.push(function(t,e,n){return{dt:Date.now()-n,f:t,context:e}}(t,e,this._startTime)),this._flushDebounced(),this._promise}}]),t}();t.exports=i},function(t,e,n){"use strict";t.exports=function(t,e,n){var r=void 0;return function(){var o=this,i=arguments,a=function(){r=null,n||t.apply(o,i)},s=n&&!r;clearTimeout(r),r=setTimeout(a,e),s&&t.apply(o,i)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4);e.defined=function(t,e){if(void 0===t)throw new r.AssertionError(e)},e.object=function(t,e){if(void 0!==t&&("object"!=typeof t||Array.isArray(t)||null===t))throw new r.AssertionError(e)},e.ok=function(t,e){if(!t)throw new r.AssertionError(e)}},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]])}return n};Object.defineProperty(e,"__esModule",{value:!0});var i=n(10),a=n(6),s=n(2),u=n(4),d=n(5),c=n(29),p=function(t){return t.useBatch?"POST":"GET"},f=function(t){return void 0===t&&(t={}),t.ms=Math.round(d.now()),t._lv=s.LoggerVersion,t};function h(t){return void 0===t&&(t={}),function(e,n){void 0===n&&(n={});var r=i.buildBiUrl(t,e,n);return c.beaconTransport(r,e,!!n.useBatch).catch((function(){return n.useBatch?c.fetchTransport(r,e,p(n)):c.pixelTransport(r,n.image)}))}}function l(t){return void 0===t&&(t={}),function(e,n){void 0===n&&(n={});var r=i.buildBiUrl(t,e,n),o=p(n);return c.fetchTransport(r,e,o).catch((function(t){return t instanceof u.APINotSupportedError?c.xhrTransport(r,e,o):Promise.reject(t)}))}}function m(t,e){return void 0===t&&(t={}),function(t){return c.postMessageTransport(t,e)}}e.imagePublisher=function(t){return void 0===t&&(t={}),function(e,n){if(void 0===n&&(n={}),n.useBatch)throw new u.APINotSupportedError("Can't use image publisher to send batched events.");var r=i.buildBiUrl(t,e,n);return c.pixelTransport(r,n.image)}},e.beaconPublisher=h,e.fetchPublisher=l,e.xhrPublisher=function(t){return void 0===t&&(t={}),function(e,n){void 0===n&&(n={});var r=i.buildBiUrl(t,e,n),o=p(n);return c.xhrTransport(r,e,o)}},e.postMessagePublisher=m,e.resolvePublisher=function(t,e){var n,r;return t.publishMethod===s.PublishMethods.PostMessage?(n=m,r=e&&e.postMessage):n=a.isWebWorker()?l:h,n(t,r)},e.getPublisher=function(t,n,i){var a=e.resolvePublisher(t,i),u=function(t,e){e&&("function"!=typeof e&&e.postMessage&&t.publishMethod===s.PublishMethods.PostMessage?e=e.postMessage:"function"!=typeof e&&(e=null));var n=e?function(t){return e(f(t))}:f;return function(e,i){return i.useBatch?(e.e=e.e.map((function(e){var a=e.context,s=o(e,["context"]);return r({},s,{f:r({},n(s.f),{_rp:a&&a.endpoint||i.endpoint||t.endpoint})})})),e):n(e)}}(t,n);return function(t,e){return a(u(t,e),e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),o=n(4);e.beaconTransport=function(t,e,n){return void 0===n&&(n=!1),new Promise((function(o,i){return r.sendBeacon(t,n?JSON.stringify(e):void 0)?o():i(new Error("Transport Error: Cannot send bi using beacon"))}))},e.pixelTransport=function(t,e){return new Promise((function(n,r){var o=e||new window.Image(0,0);o.onload=function(){return n()},o.onerror=function(){return r(new Error("Transport Error: Cannot send bi using pixel"))},o.src=t}))},e.fetchTransport=function(t,e,n){if(void 0===n&&(n="GET"),"undefined"==typeof fetch)return Promise.reject(new o.APINotSupportedError("fetch"));var r={method:n,credentials:"include"};return"POST"===n?r.body=JSON.stringify(e):r.keepalive=!0,fetch(t,r).then((function(t){if(!t.ok)throw Error("Transport Error: Cannot send bi using fetch. Status: "+t.status)}))},e.xhrTransport=function(t,e,n){return void 0===n&&(n="GET"),new Promise((function(r,o){var i=new XMLHttpRequest;i.open(n,""+location.protocol+t),i.onload=r,i.onerror=function(){o(new Error("Transport Error: Cannot send bi using xhr."))},i.withCredentials=!0,"POST"===n?i.send(JSON.stringify(e)):i.send()}))},e.postMessageTransport=function(t,e){void 0===e&&(e=self.postMessage);var n=[t];return"undefined"==typeof WorkerGlobalScope&&n.push("*"),e.apply(self,n)}},function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);t.exports=function(){return n(r),r}}else{var o=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}},function(t,e){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);t.exports=function(t,e){var r=e||0,o=n;return[o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]]].join("")}}])}));
//# sourceMappingURL=fedops-logger.bundle.min.js.map